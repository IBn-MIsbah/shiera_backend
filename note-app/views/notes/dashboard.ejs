<%- include('../partials/header') %>
<div class="app-container">
  <aside class="notes-sidebar">
    <h2 class="sidebar-title">Your Notes</h2>
    <div class="notes-list">
      <% if (locals.notes && notes.length > 0) { %>
        <% notes.forEach(note => { %>
          <div class="note-item" data-id="<%= note._id %>">
            <h3 class="note-item-title"><%= note.title %></h3>
            <div class="note-item-actions">
              <button class="btn-edit" data-id="<%= note._id %>">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn-delete" data-id="<%= note._id %>">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        <% }); %>
      <% } else { %>
        <div class="empty-notes">
          <i class="fas fa-book-open"></i>
          <p>No notes yet. Create one!</p>
        </div>
      <% } %>
    </div>
  </aside>

  <main class="notes-main">
    <div class="dashboard-header">
      <h1>Welcome, <%= user.username %>!</h1>
      <a href="/notes/create" class="btn btn-primary">
        <i class="fas fa-plus"></i> New Note
      </a>
    </div>
    
    <% if (locals.selectedNote) { %>
      <div class="note-viewer">
        <h2 class="note-title"><%= selectedNote.title || "title" %></h2>
        <div class="note-content"><%= selectedNote.content || "content" %></div>
        <div class="note-meta">
          <span>Created: <%= selectedNote.createdAt.toDateString() %></span>
          <a href="/notes/edit/<%= selectedNote._id %>" class="btn btn-edit">
            Edit Note
          </a>
        </div>
      </div>
    <% } else { %>
      <div class="note-placeholder">
        <i class="fas fa-sticky-note"></i>
        <h3>Select a note or create a new one</h3>
      </div>
    <% } %>
  </main>
</div>
<%- include('../partials/footer') %>